/* test_helper.c generated by valac 0.26.2, the Vala compiler
 * generated from test_helper.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>


#define TYPE_EVENT (event_get_type ())
#define EVENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_EVENT, Event))
#define EVENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_EVENT, EventClass))
#define IS_EVENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_EVENT))
#define IS_EVENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_EVENT))
#define EVENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_EVENT, EventClass))

typedef struct _Event Event;
typedef struct _EventClass EventClass;
typedef struct _EventPrivate EventPrivate;
#define _g_free0(var) (var = (g_free (var), NULL))

#define TYPE_TEST_EVENT (test_event_get_type ())
typedef struct _test_event test_event;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

struct _Event {
	GObject parent_instance;
	EventPrivate * priv;
	gchar* name;
	gchar* location;
	GDateTime* dt_begin;
	GDateTime* dt_end;
	gboolean all_day;
};

struct _EventClass {
	GObjectClass parent_class;
};

struct _test_event {
	gchar* source;
	Event* target;
};



#define show_format "%d-%m-%Y %X"
GType event_get_type (void) G_GNUC_CONST;
gboolean compare_events (Event* a, Event* b);
GType test_event_get_type (void) G_GNUC_CONST;
test_event* test_event_dup (const test_event* self);
void test_event_free (test_event* self);
void test_event_copy (const test_event* self, test_event* dest);
void test_event_destroy (test_event* self);
void analyze_test_events (test_event* test_events, int test_events_length1, GDateTime* dt_simulated);
Event* event_new_with_source (const gchar* source, GDateTime* _dt_simulated);
Event* event_construct_with_source (GType object_type, const gchar* source, GDateTime* _dt_simulated);
void print_all_working_test_events (test_event* test_events, int test_events_length1, GDateTime* dt_simulated);


gboolean compare_events (Event* a, Event* b) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	Event* _tmp4_ = NULL;
	const gchar* _tmp5_ = NULL;
	Event* _tmp6_ = NULL;
	const gchar* _tmp7_ = NULL;
	g_return_val_if_fail (a != NULL, FALSE);
	g_return_val_if_fail (b != NULL, FALSE);
	_tmp4_ = a;
	_tmp5_ = _tmp4_->name;
	_tmp6_ = b;
	_tmp7_ = _tmp6_->name;
	if (g_strcmp0 (_tmp5_, _tmp7_) == 0) {
		Event* _tmp8_ = NULL;
		GDateTime* _tmp9_ = NULL;
		gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		Event* _tmp12_ = NULL;
		GDateTime* _tmp13_ = NULL;
		gchar* _tmp14_ = NULL;
		gchar* _tmp15_ = NULL;
		_tmp8_ = a;
		_tmp9_ = _tmp8_->dt_begin;
		_tmp10_ = g_date_time_format (_tmp9_, show_format);
		_tmp11_ = _tmp10_;
		_tmp12_ = b;
		_tmp13_ = _tmp12_->dt_begin;
		_tmp14_ = g_date_time_format (_tmp13_, show_format);
		_tmp15_ = _tmp14_;
		_tmp3_ = g_strcmp0 (_tmp11_, _tmp15_) == 0;
		_g_free0 (_tmp15_);
		_g_free0 (_tmp11_);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		Event* _tmp16_ = NULL;
		GDateTime* _tmp17_ = NULL;
		gchar* _tmp18_ = NULL;
		gchar* _tmp19_ = NULL;
		Event* _tmp20_ = NULL;
		GDateTime* _tmp21_ = NULL;
		gchar* _tmp22_ = NULL;
		gchar* _tmp23_ = NULL;
		_tmp16_ = a;
		_tmp17_ = _tmp16_->dt_end;
		_tmp18_ = g_date_time_format (_tmp17_, show_format);
		_tmp19_ = _tmp18_;
		_tmp20_ = b;
		_tmp21_ = _tmp20_->dt_end;
		_tmp22_ = g_date_time_format (_tmp21_, show_format);
		_tmp23_ = _tmp22_;
		_tmp2_ = g_strcmp0 (_tmp19_, _tmp23_) == 0;
		_g_free0 (_tmp23_);
		_g_free0 (_tmp19_);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		Event* _tmp24_ = NULL;
		const gchar* _tmp25_ = NULL;
		Event* _tmp26_ = NULL;
		const gchar* _tmp27_ = NULL;
		_tmp24_ = a;
		_tmp25_ = _tmp24_->location;
		_tmp26_ = b;
		_tmp27_ = _tmp26_->location;
		_tmp1_ = g_strcmp0 (_tmp25_, _tmp27_) == 0;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		Event* _tmp28_ = NULL;
		gboolean _tmp29_ = FALSE;
		Event* _tmp30_ = NULL;
		gboolean _tmp31_ = FALSE;
		_tmp28_ = a;
		_tmp29_ = _tmp28_->all_day;
		_tmp30_ = b;
		_tmp31_ = _tmp30_->all_day;
		_tmp0_ = _tmp29_ == _tmp31_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	}
	result = FALSE;
	return result;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void test_event_copy (const test_event* self, test_event* dest) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	Event* _tmp2_ = NULL;
	Event* _tmp3_ = NULL;
	_tmp0_ = (*self).source;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 ((*dest).source);
	(*dest).source = _tmp1_;
	_tmp2_ = (*self).target;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_g_object_unref0 ((*dest).target);
	(*dest).target = _tmp3_;
}


void test_event_destroy (test_event* self) {
	_g_free0 ((*self).source);
	_g_object_unref0 ((*self).target);
}


test_event* test_event_dup (const test_event* self) {
	test_event* dup;
	dup = g_new0 (test_event, 1);
	test_event_copy (self, dup);
	return dup;
}


void test_event_free (test_event* self) {
	test_event_destroy (self);
	g_free (self);
}


GType test_event_get_type (void) {
	static volatile gsize test_event_type_id__volatile = 0;
	if (g_once_init_enter (&test_event_type_id__volatile)) {
		GType test_event_type_id;
		test_event_type_id = g_boxed_type_register_static ("test_event", (GBoxedCopyFunc) test_event_dup, (GBoxedFreeFunc) test_event_free);
		g_once_init_leave (&test_event_type_id__volatile, test_event_type_id);
	}
	return test_event_type_id__volatile;
}


static const gchar* string_to_string (const gchar* self) {
	const gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	result = self;
	return result;
}


static gchar* bool_to_string (gboolean self) {
	gchar* result = NULL;
	if (self) {
		gchar* _tmp0_ = NULL;
		_tmp0_ = g_strdup ("true");
		result = _tmp0_;
		return result;
	} else {
		gchar* _tmp1_ = NULL;
		_tmp1_ = g_strdup ("false");
		result = _tmp1_;
		return result;
	}
}


void analyze_test_events (test_event* test_events, int test_events_length1, GDateTime* dt_simulated) {
	GDateTime* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gint N_error = 0;
	gint N_success = 0;
	test_event* _tmp3_ = NULL;
	gint _tmp3__length1 = 0;
	gint _tmp75_ = 0;
	gchar* _tmp76_ = NULL;
	gchar* _tmp77_ = NULL;
	gint _tmp78_ = 0;
	gchar* _tmp79_ = NULL;
	gchar* _tmp80_ = NULL;
	gchar* _tmp81_ = NULL;
	gchar* _tmp82_ = NULL;
	g_return_if_fail (dt_simulated != NULL);
	_tmp0_ = dt_simulated;
	_tmp1_ = g_date_time_format (_tmp0_, show_format);
	_tmp2_ = _tmp1_;
	g_print ("\n\n--- Simulated Time: %s\n\n", _tmp2_);
	_g_free0 (_tmp2_);
	N_error = 0;
	N_success = 0;
	_tmp3_ = test_events;
	_tmp3__length1 = test_events_length1;
	{
		test_event* entry_collection = NULL;
		gint entry_collection_length1 = 0;
		gint _entry_collection_size_ = 0;
		gint entry_it = 0;
		entry_collection = _tmp3_;
		entry_collection_length1 = _tmp3__length1;
		for (entry_it = 0; entry_it < _tmp3__length1; entry_it = entry_it + 1) {
			test_event _tmp4_ = {0};
			test_event entry = {0};
			test_event_copy (&entry_collection[entry_it], &_tmp4_);
			entry = _tmp4_;
			{
				Event* cmp_event = NULL;
				test_event _tmp5_ = {0};
				const gchar* _tmp6_ = NULL;
				GDateTime* _tmp7_ = NULL;
				Event* _tmp8_ = NULL;
				Event* _tmp9_ = NULL;
				test_event _tmp10_ = {0};
				Event* _tmp11_ = NULL;
				gboolean _tmp12_ = FALSE;
				_tmp5_ = entry;
				_tmp6_ = _tmp5_.source;
				_tmp7_ = dt_simulated;
				_tmp8_ = event_new_with_source (_tmp6_, _tmp7_);
				cmp_event = _tmp8_;
				_tmp9_ = cmp_event;
				_tmp10_ = entry;
				_tmp11_ = _tmp10_.target;
				_tmp12_ = compare_events (_tmp9_, _tmp11_);
				if (_tmp12_) {
					gint _tmp13_ = 0;
					_tmp13_ = N_success;
					N_success = _tmp13_ + 1;
				} else {
					gint _tmp14_ = 0;
					test_event _tmp15_ = {0};
					const gchar* _tmp16_ = NULL;
					const gchar* _tmp17_ = NULL;
					gchar* _tmp18_ = NULL;
					gchar* _tmp19_ = NULL;
					Event* _tmp20_ = NULL;
					const gchar* _tmp21_ = NULL;
					const gchar* _tmp22_ = NULL;
					test_event _tmp23_ = {0};
					Event* _tmp24_ = NULL;
					const gchar* _tmp25_ = NULL;
					const gchar* _tmp26_ = NULL;
					gchar* _tmp27_ = NULL;
					gchar* _tmp28_ = NULL;
					Event* _tmp29_ = NULL;
					GDateTime* _tmp30_ = NULL;
					gchar* _tmp31_ = NULL;
					gchar* _tmp32_ = NULL;
					const gchar* _tmp33_ = NULL;
					test_event _tmp34_ = {0};
					Event* _tmp35_ = NULL;
					GDateTime* _tmp36_ = NULL;
					gchar* _tmp37_ = NULL;
					gchar* _tmp38_ = NULL;
					const gchar* _tmp39_ = NULL;
					gchar* _tmp40_ = NULL;
					gchar* _tmp41_ = NULL;
					Event* _tmp42_ = NULL;
					GDateTime* _tmp43_ = NULL;
					gchar* _tmp44_ = NULL;
					gchar* _tmp45_ = NULL;
					const gchar* _tmp46_ = NULL;
					test_event _tmp47_ = {0};
					Event* _tmp48_ = NULL;
					GDateTime* _tmp49_ = NULL;
					gchar* _tmp50_ = NULL;
					gchar* _tmp51_ = NULL;
					const gchar* _tmp52_ = NULL;
					gchar* _tmp53_ = NULL;
					gchar* _tmp54_ = NULL;
					Event* _tmp55_ = NULL;
					const gchar* _tmp56_ = NULL;
					const gchar* _tmp57_ = NULL;
					test_event _tmp58_ = {0};
					Event* _tmp59_ = NULL;
					const gchar* _tmp60_ = NULL;
					const gchar* _tmp61_ = NULL;
					gchar* _tmp62_ = NULL;
					gchar* _tmp63_ = NULL;
					Event* _tmp64_ = NULL;
					gboolean _tmp65_ = FALSE;
					gchar* _tmp66_ = NULL;
					gchar* _tmp67_ = NULL;
					test_event _tmp68_ = {0};
					Event* _tmp69_ = NULL;
					gboolean _tmp70_ = FALSE;
					gchar* _tmp71_ = NULL;
					gchar* _tmp72_ = NULL;
					gchar* _tmp73_ = NULL;
					gchar* _tmp74_ = NULL;
					_tmp14_ = N_error;
					N_error = _tmp14_ + 1;
					_tmp15_ = entry;
					_tmp16_ = _tmp15_.source;
					_tmp17_ = string_to_string (_tmp16_);
					_tmp18_ = g_strconcat ("Error - ", _tmp17_, "\n", NULL);
					_tmp19_ = _tmp18_;
					g_print ("%s", _tmp19_);
					_g_free0 (_tmp19_);
					_tmp20_ = cmp_event;
					_tmp21_ = _tmp20_->name;
					_tmp22_ = string_to_string (_tmp21_);
					_tmp23_ = entry;
					_tmp24_ = _tmp23_.target;
					_tmp25_ = _tmp24_->name;
					_tmp26_ = string_to_string (_tmp25_);
					_tmp27_ = g_strconcat (" Name: ", _tmp22_, " | ", _tmp26_, "\n", NULL);
					_tmp28_ = _tmp27_;
					g_print ("%s", _tmp28_);
					_g_free0 (_tmp28_);
					_tmp29_ = cmp_event;
					_tmp30_ = _tmp29_->dt_begin;
					_tmp31_ = g_date_time_format (_tmp30_, show_format);
					_tmp32_ = _tmp31_;
					_tmp33_ = string_to_string (_tmp32_);
					_tmp34_ = entry;
					_tmp35_ = _tmp34_.target;
					_tmp36_ = _tmp35_->dt_begin;
					_tmp37_ = g_date_time_format (_tmp36_, show_format);
					_tmp38_ = _tmp37_;
					_tmp39_ = string_to_string (_tmp38_);
					_tmp40_ = g_strconcat (" Begin: ", _tmp33_, " | ", _tmp39_, "\n", NULL);
					_tmp41_ = _tmp40_;
					g_print ("%s", _tmp41_);
					_g_free0 (_tmp41_);
					_g_free0 (_tmp38_);
					_g_free0 (_tmp32_);
					_tmp42_ = cmp_event;
					_tmp43_ = _tmp42_->dt_end;
					_tmp44_ = g_date_time_format (_tmp43_, show_format);
					_tmp45_ = _tmp44_;
					_tmp46_ = string_to_string (_tmp45_);
					_tmp47_ = entry;
					_tmp48_ = _tmp47_.target;
					_tmp49_ = _tmp48_->dt_end;
					_tmp50_ = g_date_time_format (_tmp49_, show_format);
					_tmp51_ = _tmp50_;
					_tmp52_ = string_to_string (_tmp51_);
					_tmp53_ = g_strconcat (" End: ", _tmp46_, " | ", _tmp52_, "\n", NULL);
					_tmp54_ = _tmp53_;
					g_print ("%s", _tmp54_);
					_g_free0 (_tmp54_);
					_g_free0 (_tmp51_);
					_g_free0 (_tmp45_);
					_tmp55_ = cmp_event;
					_tmp56_ = _tmp55_->location;
					_tmp57_ = string_to_string (_tmp56_);
					_tmp58_ = entry;
					_tmp59_ = _tmp58_.target;
					_tmp60_ = _tmp59_->location;
					_tmp61_ = string_to_string (_tmp60_);
					_tmp62_ = g_strconcat (" Location: ", _tmp57_, " | ", _tmp61_, "\n", NULL);
					_tmp63_ = _tmp62_;
					g_print ("%s", _tmp63_);
					_g_free0 (_tmp63_);
					_tmp64_ = cmp_event;
					_tmp65_ = _tmp64_->all_day;
					_tmp66_ = bool_to_string (_tmp65_);
					_tmp67_ = _tmp66_;
					_tmp68_ = entry;
					_tmp69_ = _tmp68_.target;
					_tmp70_ = _tmp69_->all_day;
					_tmp71_ = bool_to_string (_tmp70_);
					_tmp72_ = _tmp71_;
					_tmp73_ = g_strconcat (" All Day: ", _tmp67_, " | ", _tmp72_, "\n\n", NULL);
					_tmp74_ = _tmp73_;
					g_print ("%s", _tmp74_);
					_g_free0 (_tmp74_);
					_g_free0 (_tmp72_);
					_g_free0 (_tmp67_);
				}
				_g_object_unref0 (cmp_event);
				test_event_destroy (&entry);
			}
		}
	}
	g_print ("\n--- Result ---\n");
	_tmp75_ = N_success;
	_tmp76_ = g_strdup_printf ("%i", _tmp75_);
	_tmp77_ = _tmp76_;
	_tmp78_ = N_error;
	_tmp79_ = g_strdup_printf ("%i", _tmp78_);
	_tmp80_ = _tmp79_;
	_tmp81_ = g_strconcat (" # Success: ", _tmp77_, " | # Error: ", _tmp80_, " \n", NULL);
	_tmp82_ = _tmp81_;
	g_print ("%s", _tmp82_);
	_g_free0 (_tmp82_);
	_g_free0 (_tmp80_);
	_g_free0 (_tmp77_);
}


void print_all_working_test_events (test_event* test_events, int test_events_length1, GDateTime* dt_simulated) {
	test_event* _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	g_return_if_fail (dt_simulated != NULL);
	_tmp0_ = test_events;
	_tmp0__length1 = test_events_length1;
	{
		test_event* entry_collection = NULL;
		gint entry_collection_length1 = 0;
		gint _entry_collection_size_ = 0;
		gint entry_it = 0;
		entry_collection = _tmp0_;
		entry_collection_length1 = _tmp0__length1;
		for (entry_it = 0; entry_it < _tmp0__length1; entry_it = entry_it + 1) {
			test_event _tmp1_ = {0};
			test_event entry = {0};
			test_event_copy (&entry_collection[entry_it], &_tmp1_);
			entry = _tmp1_;
			{
				Event* cmp_event = NULL;
				test_event _tmp2_ = {0};
				const gchar* _tmp3_ = NULL;
				GDateTime* _tmp4_ = NULL;
				Event* _tmp5_ = NULL;
				Event* _tmp6_ = NULL;
				test_event _tmp7_ = {0};
				Event* _tmp8_ = NULL;
				gboolean _tmp9_ = FALSE;
				_tmp2_ = entry;
				_tmp3_ = _tmp2_.source;
				_tmp4_ = dt_simulated;
				_tmp5_ = event_new_with_source (_tmp3_, _tmp4_);
				cmp_event = _tmp5_;
				_tmp6_ = cmp_event;
				_tmp7_ = entry;
				_tmp8_ = _tmp7_.target;
				_tmp9_ = compare_events (_tmp6_, _tmp8_);
				if (_tmp9_) {
					test_event _tmp10_ = {0};
					const gchar* _tmp11_ = NULL;
					const gchar* _tmp12_ = NULL;
					gchar* _tmp13_ = NULL;
					gchar* _tmp14_ = NULL;
					_tmp10_ = entry;
					_tmp11_ = _tmp10_.source;
					_tmp12_ = string_to_string (_tmp11_);
					_tmp13_ = g_strconcat ("- ", _tmp12_, "\n", NULL);
					_tmp14_ = _tmp13_;
					g_print ("%s", _tmp14_);
					_g_free0 (_tmp14_);
				}
				_g_object_unref0 (cmp_event);
				test_event_destroy (&entry);
			}
		}
	}
}



